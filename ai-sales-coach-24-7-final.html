<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Sales Coach 24/7 - Mr. Sprinkle</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            background: #000; 
            color: #fff; 
            font-family: Arial, sans-serif; 
            padding: 20px;
        }
        .container { max-width: 1400px; margin: 0 auto; }
        .header { text-align: center; margin-bottom: 20px; }
        .header h1 { color: #FFD700; font-size: 2rem; margin-bottom: 10px; }
        
        .main-layout {
            display: grid;
            grid-template-columns: 1fr 400px;
            gap: 20px;
            height: calc(100vh - 120px);
        }
        
        .lead-finder {
            background: #1a1a1a;
            border: 2px solid #333;
            border-radius: 10px;
            padding: 20px;
            overflow-y: auto;
        }
        
        .ai-coach {
            background: #1a1a1a;
            border: 2px solid #00ff00;
            border-radius: 10px;
            padding: 20px;
            display: flex;
            flex-direction: column;
        }
        
        .coach-header {
            color: #00ff00;
            font-size: 1.2rem;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .ai-status {
            background: #2a2a2a;
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 15px;
            text-align: center;
        }
        
        .ai-advice {
            flex: 1;
            background: #2a2a2a;
            border-radius: 5px;
            padding: 15px;
            overflow-y: auto;
            margin-bottom: 15px;
        }
        
        .message-input {
            background: #333;
            border: 1px solid #555;
            border-radius: 5px;
            padding: 10px;
            color: #fff;
            width: 100%;
            margin-bottom: 10px;
            resize: vertical;
            min-height: 80px;
        }
        
        .btn {
            background: #FFD700;
            color: #000;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            margin: 5px;
            transition: all 0.3s;
        }
        
        .btn:hover { background: #1E90FF; color: #fff; }
        .btn.ai-btn { background: #00ff00; }
        .btn.danger { background: #ff4444; }
        
        .prospect-item {
            background: #2a2a2a;
            border-left: 4px solid #FFD700;
            padding: 15px;
            margin: 10px 0;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .prospect-item:hover { background: #333; }
        .prospect-item.selected { border-left-color: #00ff00; background: #2a3a2a; }
        
        .ai-suggestion {
            background: #003300;
            border: 1px solid #00ff00;
            border-radius: 5px;
            padding: 10px;
            margin: 5px 0;
            font-size: 0.9rem;
        }
        
        .ai-suggestion.urgent {
            background: #330000;
            border-color: #ff4444;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        
        .quick-actions {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .platform-tabs {
            display: flex;
            gap: 5px;
            margin-bottom: 15px;
        }
        
        .tab {
            background: #333;
            color: #fff;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9rem;
        }
        
        .tab.active { background: #FFD700; color: #000; }
        
        .search-controls {
            display: grid;
            grid-template-columns: 1fr auto;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .search-input {
            background: #333;
            border: 1px solid #555;
            border-radius: 5px;
            padding: 10px;
            color: #fff;
        }
        
        .real-prospect-section {
            background: #2a2a2a;
            border: 1px solid #555;
            border-radius: 5px;
            padding: 15px;
            margin: 10px 0;
        }
        
        .real-prospect-input {
            width: 100%;
            height: 120px;
            background: #333;
            border: 1px solid #555;
            border-radius: 5px;
            padding: 10px;
            color: #fff;
            resize: vertical;
            margin: 10px 0;
        }
        
        .prospect-actions {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }
        
        .platform-links {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin: 10px 0;
        }
        
        .platform-link {
            background: #333;
            color: #fff;
            padding: 10px;
            border-radius: 5px;
            text-align: center;
            text-decoration: none;
            transition: all 0.3s;
        }
        
        .platform-link:hover {
            background: #FFD700;
            color: #000;
        }
        
        .dashboard {
            background: #2a2a2a;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
        }
        
        .dashboard-item {
            display: flex;
            justify-content: space-between;
            margin: 5px 0;
            padding: 5px 0;
            border-bottom: 1px solid #333;
        }
        
        .dashboard-value {
            color: #FFD700;
            font-weight: bold;
        }
        
        .live-feed {
            background: #1a1a1a;
            border: 1px solid #333;
            border-radius: 5px;
            padding: 10px;
            margin-top: 15px;
            max-height: 200px;
            overflow-y: auto;
            font-size: 0.8rem;
        }
        
        .feed-item {
            padding: 5px;
            margin: 2px 0;
            border-left: 3px solid #00ff00;
            padding-left: 10px;
        }
        
        .feed-item.success { border-left-color: #00ff00; }
        .feed-item.warning { border-left-color: #ffaa00; }
        .feed-item.error { border-left-color: #ff4444; }
        
        .timestamp {
            color: #888;
            font-size: 0.7rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ü§ñ AI Sales Coach 24/7 - Real Prospect System</h1>
            <p>Find real prospects and get AI coaching for outreach</p>
        </div>

        <div class="main-layout">
            <!-- Lead Finder Section -->
            <div class="lead-finder">
                <h3 style="color: #FFD700; margin-bottom: 15px;">üéØ Real Prospect Finder</h3>
                
                <div class="dashboard">
                    <h4 style="color: #00ff00; margin-bottom: 10px;">üìä Live Dashboard</h4>
                    <div class="dashboard-item">
                        <span>Total Prospects:</span>
                        <span class="dashboard-value" id="total-prospects">0</span>
                    </div>
                    <div class="dashboard-item">
                        <span>Messages Generated:</span>
                        <span class="dashboard-value" id="messages-generated">0</span>
                    </div>
                    <div class="dashboard-item">
                        <span>System Status:</span>
                        <span class="dashboard-value" id="system-status">READY</span>
                    </div>
                </div>

                <div class="platform-tabs">
                    <button class="tab active" onclick="switchPlatform('instagram')">Instagram</button>
                    <button class="tab" onclick="switchPlatform('facebook')">Facebook</button>
                    <button class="tab" onclick="switchPlatform('twitter')">Twitter</button>
                    <button class="tab" onclick="switchPlatform('tiktok')">TikTok</button>
                </div>

                <div class="search-controls">
                    <input type="text" class="search-input" id="searchTerm" placeholder="Enter hashtag or search term..." value="renomusic">
                    <button class="btn" onclick="openPlatformSearch()">üîó Open Platform</button>
                </div>

                <div class="auto-search-section" style="background: #2a2a2a; border: 1px solid #00ff00; border-radius: 5px; padding: 15px; margin: 10px 0;">
                    <h4 style="color: #00ff00; margin-bottom: 10px;">ü§ñ 24/7 Auto Lead Hunter</h4>
                    <div style="display: grid; grid-template-columns: 1fr auto; gap: 10px; margin-bottom: 10px;">
                        <select id="autoSearchInterval" style="background: #333; color: #fff; border: 1px solid #555; border-radius: 5px; padding: 8px;">
                            <option value="10000">Every 10 seconds</option>
                            <option value="30000" selected>Every 30 seconds</option>
                            <option value="60000">Every 1 minute</option>
                            <option value="300000">Every 5 minutes</option>
                        </select>
                        <button class="btn ai-btn" id="autoSearchBtn" onclick="toggleAutoSearch()">‚ñ∂Ô∏è Start Auto Hunt</button>
                    </div>
                    <div style="font-size: 0.8rem; color: #ccc;">
                        ü§ñ Uses Grok AI + No-Login Scraping for prospects<br>
                        üîç Public data scraping (no authentication needed)<br>
                        üìù Manual prospecting guide available
                    </div>
                    <div style="margin-top: 10px; padding: 8px; background: #333; border-radius: 3px; font-size: 0.7rem;">
                        <span style="color: #00ff00;">‚óè</span> <span id="search-status">Ready to hunt for leads</span>
                    </div>
                </div>

                <div class="platform-links">
                    <a href="#" class="platform-link" onclick="openPlatform('instagram')" id="ig-link">Open Instagram</a>
                    <a href="#" class="platform-link" onclick="openPlatform('facebook')" id="fb-link">Open Facebook</a>
                    <a href="#" class="platform-link" onclick="openPlatform('twitter')" id="tw-link">Open Twitter</a>
                    <a href="#" class="platform-link" onclick="openPlatform('tiktok')" id="tt-link">Open TikTok</a>
                </div>

                <div class="promotional-section" style="background: #2a2a2a; border: 1px solid #FFD700; border-radius: 5px; padding: 15px; margin: 10px 0;">
                    <h4 style="color: #FFD700; margin-bottom: 10px;">üìß Auto Promotional Material</h4>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-bottom: 10px;">
                        <button class="btn" onclick="generatePromoEmail()">üìß Generate Email</button>
                        <button class="btn" onclick="generatePromoDM()">üí¨ Generate DM</button>
                        <button class="btn" onclick="generatePromoSMS()">üì± Generate SMS</button>
                        <button class="btn" onclick="generatePromoPost()">üìù Generate Post</button>
                    </div>
                    <textarea id="promoOutput" style="width: 100%; height: 100px; background: #333; border: 1px solid #555; border-radius: 5px; padding: 10px; color: #fff; resize: vertical;" placeholder="Generated promotional material will appear here..."></textarea>
                    <div style="display: flex; gap: 10px; margin-top: 10px;">
                        <button class="btn" onclick="copyPromoMaterial()">üìã Copy</button>
                        <button class="btn" onclick="savePromoTemplate()">üíæ Save Template</button>
                    </div>
                </div>

                <div class="real-prospect-section">
                    <h4 style="color: #00ff00;">‚úçÔ∏è Add Real Prospects</h4>
                    <p style="color: #ccc; font-size: 0.9rem;">Copy real profile info from social media and paste here:</p>
                    
                    <textarea class="real-prospect-input" id="realProspectInput" placeholder="Paste real prospect info:
- Username: @example_user
- Platform: Instagram
- Location: Reno, NV
- Bio: Local artist, loves fashion
- Recent posts: Music, style content
- Followers: 2.3K
- Engagement: High"></textarea>
                    
                    <div class="prospect-actions">
                        <button class="btn" onclick="addRealProspect()">‚ûï Add Prospect</button>
                        <button class="btn" onclick="clearProspects()">üóëÔ∏è Clear All</button>
                        <button class="btn" onclick="exportProspects()">üì• Export</button>
                    </div>
                </div>

                <div id="prospectsList">
                    <p style="color: #ccc; text-align: center; padding: 20px;">
                        No real prospects found yet. Use "Start Auto Hunt" or add manually!
                    </p>
                </div>

                <div class="live-feed" id="live-feed">
                    <div class="feed-item success">
                        <div class="timestamp">System initialized</div>
                        <strong>üöÄ AI Sales Coach 24/7 activated</strong>
                    </div>
                </div>
            </div>

            <!-- AI Coach Section -->
            <div class="ai-coach">
                <div class="coach-header">ü§ñ AI Sales Coach</div>
                
                <div class="ai-status" id="aiStatus">
                    <span style="color: #00ff00;">‚óè</span> AI Coach Ready - Add real prospects to analyze
                </div>

                <div class="quick-actions">
                    <button class="btn ai-btn" onclick="getInstantAdvice()">üí° Instant Advice</button>
                    <button class="btn ai-btn" onclick="analyzeProspect()">üîç Analyze Prospect</button>
                    <button class="btn ai-btn" onclick="generateMessage()">‚úçÔ∏è Write Message</button>
                    <button class="btn ai-btn" onclick="closeStrategy()">üéØ Close Strategy</button>
                </div>

                <div class="ai-advice" id="aiAdvice">
                    <div class="ai-suggestion">
                        <strong>üéØ How to use this system:</strong><br>
                        1. Click platform links to open real social media<br>
                        2. Search for Reno/Nevada users interested in music/fashion<br>
                        3. Copy their profile info and paste in the box above<br>
                        4. Click "Add Prospect" to analyze with AI<br>
                        5. Get personalized outreach strategies<br><br>
                        <strong>üí° Pro tip:</strong> Look for users posting about music, fashion, or local events in Reno/Sparks/Carson City/Lake Tahoe areas!
                    </div>
                </div>

                <textarea class="message-input" id="messageInput" placeholder="Your generated message will appear here..."></textarea>
                
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                    <button class="btn ai-btn" onclick="improveMessage()">‚ú® Improve Message</button>
                    <button class="btn" onclick="copyMessage()">üìã Copy Message</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentPlatform = 'instagram';
        let selectedProspect = null;
        let realProspects = [];
        let autoSearchActive = false;
        let autoSearchInterval = null;
        let leadGenerationCount = 0;
        let promoTemplates = [];

        // Auto-search keywords for different platforms
        const autoSearchKeywords = {
            instagram: ['renomusic', 'nevadaartist', 'renofashion', 'sparksnv', 'renolife', 'nevadastyle', 'renohiphop', 'laketahoe', 'carsonmusic'],
            facebook: ['Reno Hip-Hop', 'Nevada Artists', 'Reno Fashion', 'Sparks Music', 'Carson City Artists'],
            twitter: ['grillz reno', 'nevada music', 'reno artist', 'sparks fashion', 'tahoe style'],
            tiktok: ['renomusic', 'nevadaartist', 'grillz', 'renofashion', 'sparksnv']
        };

        // Load saved prospects and start systems
        loadSavedProspects();
        loadPromoTemplates();
        initializeAutoSystems();

        function switchPlatform(platform) {
            currentPlatform = platform;
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            event.target.classList.add('active');
            
            const searchInput = document.getElementById('searchTerm');
            const placeholders = {
                instagram: 'renomusic, nevadaartist, grillz, renofashion',
                facebook: 'Reno Hip-Hop Community, Nevada Artists, Reno Fashion',
                twitter: 'grillz reno, nevada music, custom jewelry',
                tiktok: '#renomusic, #nevadaartist, #grillz'
            };
            searchInput.placeholder = placeholders[platform];
            
            updateAIStatus(`Switched to ${platform.charAt(0).toUpperCase() + platform.slice(1)} hunting mode`);
        }

        function openPlatform(platform) {
            const urls = {
                instagram: `https://instagram.com/explore/tags/${encodeURIComponent(document.getElementById('searchTerm').value || 'renomusic')}/`,
                facebook: `https://facebook.com/search/groups/?q=${encodeURIComponent(document.getElementById('searchTerm').value || 'reno music')}`,
                twitter: `https://twitter.com/search?q=${encodeURIComponent(document.getElementById('searchTerm').value || 'grillz reno')}`,
                tiktok: `https://tiktok.com/search?q=${encodeURIComponent(document.getElementById('searchTerm').value || 'renomusic')}`
            };
            
            window.open(urls[platform], '_blank');
            updateAIStatus(`Opened ${platform} - search for Reno/Nevada users manually`);
        }

        function openPlatformSearch() {
            openPlatform(currentPlatform);
        }

        function addRealProspect() {
            const input = document.getElementById('realProspectInput').value.trim();
            if (!input) {
                alert('Please paste real prospect information first!');
                return;
            }

            const prospect = parseProspectInfo(input);
            if (prospect) {
                realProspects.push(prospect);
                displayProspects();
                saveProspects();
                updateDashboard();
                document.getElementById('realProspectInput').value = '';
                updateAIStatus(`Added real prospect: @${prospect.username}`);
                addToFeed(`‚úÖ Added: @${prospect.username} (${prospect.platform})`);
                
                // Send to Zapier webhook
                sendToWebhook(prospect);
            } else {
                alert('Could not parse prospect info. Please include username and platform at minimum.');
            }
        }

        function parseProspectInfo(text) {
            const lines = text.split('\n');
            const prospect = {
                id: `real_${Date.now()}`,
                username: '',
                platform: currentPlatform,
                location: '',
                bio: '',
                recentPosts: '',
                followers: '',
                engagement: 'medium',
                priority: 'medium'
            };

            // Try to extract username from various formats
            const usernamePatterns = [
                /username[:\s]+@?([a-zA-Z0-9._]+)/i,
                /user[:\s]+@?([a-zA-Z0-9._]+)/i,
                /handle[:\s]+@?([a-zA-Z0-9._]+)/i,
                /@([a-zA-Z0-9._]+)/,
                /^([a-zA-Z0-9._]+)$/m
            ];

            // Extract username
            for (const pattern of usernamePatterns) {
                const match = text.match(pattern);
                if (match && match[1]) {
                    prospect.username = match[1].replace('@', '');
                    break;
                }
            }

            // If no username found, try first word that looks like a username
            if (!prospect.username) {
                const words = text.split(/\s+/);
                for (const word of words) {
                    if (word.match(/^@?[a-zA-Z0-9._]{3,}$/)) {
                        prospect.username = word.replace('@', '');
                        break;
                    }
                }
            }

            // Parse other fields
            lines.forEach(line => {
                const lowerLine = line.toLowerCase();
                if (lowerLine.includes('platform:')) {
                    prospect.platform = line.split(':')[1].trim().toLowerCase();
                } else if (lowerLine.includes('location:')) {
                    prospect.location = line.split(':')[1].trim();
                } else if (lowerLine.includes('bio:')) {
                    prospect.bio = line.split(':')[1].trim();
                } else if (lowerLine.includes('recent posts:') || lowerLine.includes('recent:')) {
                    prospect.recentPosts = line.split(':')[1].trim();
                } else if (lowerLine.includes('followers:')) {
                    prospect.followers = line.split(':')[1].trim();
                }
            });

            // If no specific fields found, treat as bio
            if (!prospect.bio && !prospect.location && text.length > 10) {
                prospect.bio = text.substring(0, 200);
            }

            // Auto-detect priority based on location and content
            if (prospect.location.toLowerCase().includes('reno') || 
                prospect.location.toLowerCase().includes('sparks') || 
                prospect.location.toLowerCase().includes('carson') || 
                prospect.location.toLowerCase().includes('tahoe') || 
                prospect.location.toLowerCase().includes('nevada')) {
                prospect.priority = 'high';
            }

            // Return prospect if we have at least a username
            if (prospect.username && prospect.username.length >= 3) {
                return prospect;
            }
            return null;
        }

        function displayProspects() {
            const prospectsList = document.getElementById('prospectsList');
            
            if (realProspects.length === 0) {
                prospectsList.innerHTML = '<p style="color: #ccc; text-align: center; padding: 20px;">No real prospects found yet. Configure Grok API and start auto-hunt!</p>';
                return;
            }

            prospectsList.innerHTML = realProspects.map((prospect, index) => `
                <div class="prospect-item" data-prospect-id="${prospect.id}" onclick="selectProspect(${index})">
                    <strong>@${prospect.username}</strong> 
                    ${prospect.verified ? '<span style="color: #00ff00; font-size: 0.7rem;">‚úÖ VERIFIED</span>' : ''}
                    ${prospect.autoGenerated ? '<span style="color: #00ff00; font-size: 0.7rem;">[AUTO]</span>' : ''}
                    <div style="color: #ccc; font-size: 0.9rem;">${prospect.platform} ‚Ä¢ ${prospect.location}</div>
                    ${prospect.bio ? `<div style="color: #aaa; font-size: 0.8rem;">${prospect.bio}</div>` : ''}
                    ${prospect.followers ? `<div style="color: #FFD700; font-size: 0.8rem;">${prospect.followers} followers</div>` : ''}
                    <div style="color: ${prospect.priority === 'high' ? '#00ff00' : prospect.priority === 'medium' ? '#ffaa00' : '#ccc'}; font-size: 0.8rem;">Priority: ${prospect.priority}</div>
                    ${prospect.source ? `<div style="color: #888; font-size: 0.7rem;">Source: ${prospect.source}</div>` : ''}
                    ${prospect.lastChecked ? `<div style="color: #666; font-size: 0.6rem;">Verified: ${new Date(prospect.lastChecked).toLocaleTimeString()}</div>` : ''}
                    <div class="prospect-actions" style="margin-top: 5px;">
                        <button class="btn" style="padding: 2px 8px; font-size: 0.7rem;" onclick="event.stopPropagation(); openProfile('${prospect.platform}', '${prospect.username}')">üë§ View Profile</button>
                        <button class="btn ai-btn" style="padding: 2px 8px; font-size: 0.7rem;" onclick="event.stopPropagation(); quickAnalyze(${index})">üîç Quick AI</button>
                        ${prospect.verified ? '' : '<button class="btn danger" style="padding: 2px 8px; font-size: 0.7rem;" onclick="event.stopPropagation(); removeProspect(' + index + ')">‚ùå Remove</button>'}
                    </div>
                </div>
            `).join('');
        }

        function openProfile(platform, username) {
            const urls = {
                instagram: `https://instagram.com/${username}`,
                facebook: `https://facebook.com/${username}`,
                twitter: `https://twitter.com/${username}`,
                tiktok: `https://tiktok.com/@${username}`
            };
            
            if (urls[platform]) {
                window.open(urls[platform], '_blank');
            }
        }

        function clearProspects() {
            if (confirm('Are you sure you want to clear all prospects?')) {
                realProspects = [];
                displayProspects();
                saveProspects();
                updateDashboard();
                updateAIStatus('All prospects cleared');
                addToFeed('üóëÔ∏è All prospects cleared');
            }
        }

        function saveProspects() {
            localStorage.setItem('real_prospects', JSON.stringify(realProspects));
        }

        function loadSavedProspects() {
            // Clear old data and start fresh
            localStorage.removeItem('real_prospects');
            localStorage.removeItem('messages_generated');
            localStorage.removeItem('auto_search_active');
            realProspects = [];
            displayProspects();
            updateDashboard();
        }

        function exportProspects() {
            if (realProspects.length === 0) {
                alert('No prospects to export!');
                return;
            }

            const csv = 'Username,Platform,Location,Priority,Followers,Bio\n' + 
                realProspects.map(p => 
                    `${p.username},${p.platform},${p.location},${p.priority},${p.followers || ''},"${p.bio || ''}"`
                ).join('\n');
            
            const blob = new Blob([csv], { type: 'text/csv' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `prospects-${new Date().toISOString().split('T')[0]}.csv`;
            a.click();
            
            updateAIStatus(`Exported ${realProspects.length} prospects`);
            addToFeed(`üì• Exported ${realProspects.length} prospects`);
        }

        function updateDashboard() {
            document.getElementById('total-prospects').textContent = realProspects.length;
            document.getElementById('messages-generated').textContent = localStorage.getItem('messages_generated') || 0;
        }

        function addToFeed(message) {
            const feed = document.getElementById('live-feed');
            const item = document.createElement('div');
            item.className = 'feed-item success';
            item.innerHTML = `
                <div class="timestamp">${new Date().toLocaleTimeString()}</div>
                <strong>${message}</strong>
            `;
            feed.insertBefore(item, feed.firstChild);
            
            while (feed.children.length > 50) {
                feed.removeChild(feed.lastChild);
            }
        }

        // AI Coach Functions
        async function getInstantAdvice() {
            if (!selectedProspect) {
                displayAIAdvice("Please select a prospect first by clicking on their profile!", 'urgent');
                return;
            }
            
            updateAIStatus("Getting instant advice...");
            const advice = generateAIAdvice(selectedProspect, 'instant');
            displayAIAdvice(advice, 'instant');
            updateAIStatus("Instant advice delivered!");
        }

        async function analyzeProspect() {
            if (!selectedProspect) {
                displayAIAdvice("Please select a prospect first!", 'urgent');
                return;
            }
            
            updateAIStatus("Analyzing prospect...");
            const analysis = generateAIAdvice(selectedProspect, 'analysis');
            displayAIAdvice(analysis, 'analysis');
            updateAIStatus("Analysis complete!");
        }

        async function generateMessage() {
            if (!selectedProspect) {
                displayAIAdvice("Please select a prospect first!", 'urgent');
                return;
            }
            
            updateAIStatus("Generating personalized message...");
            const message = generateAIAdvice(selectedProspect, 'message');
            document.getElementById('messageInput').value = message;
            displayAIAdvice(`‚úçÔ∏è Generated message for @${selectedProspect.username}!`, 'success');
            updateAIStatus("Message generated!");
            
            // Track message generation
            const count = parseInt(localStorage.getItem('messages_generated') || '0') + 1;
            localStorage.setItem('messages_generated', count.toString());
            updateDashboard();
        }

        async function closeStrategy() {
            if (!selectedProspect) {
                displayAIAdvice("Please select a prospect first!", 'urgent');
                return;
            }
            
            updateAIStatus("Developing closing strategy...");
            const strategy = generateAIAdvice(selectedProspect, 'strategy');
            displayAIAdvice(strategy, 'strategy');
            updateAIStatus("Closing strategy ready!");
        }

        async function improveMessage() {
            const message = document.getElementById('messageInput').value;
            if (!message.trim()) {
                displayAIAdvice("Type or generate a message first!", 'urgent');
                return;
            }
            
            updateAIStatus("Improving your message...");
            const improved = generateAIAdvice({ message, prospect: selectedProspect }, 'improve');
            document.getElementById('messageInput').value = improved;
            displayAIAdvice("‚ú® Message improved!", 'success');
            updateAIStatus("Message optimized!");
        }

        async function copyMessage() {
            const message = document.getElementById('messageInput').value;
            if (!message.trim()) {
                displayAIAdvice("No message to copy!", 'urgent');
                return;
            }
            
            navigator.clipboard.writeText(message).then(() => {
                displayAIAdvice("üìã Message copied to clipboard!", 'success');
                updateAIStatus("Message copied!");
            });
        }

        function generateAIAdvice(data, type) {
            const prospect = type === 'improve' ? data.prospect : data;
            const message = type === 'improve' ? data.message : null;

            switch (type) {
                case 'instant':
                    return `üéØ INSTANT TIPS for @${prospect.username}:
1. Reference their location: "${prospect.location}"
2. Mention 20+ years Reno experience
3. Offer FREE mobile consultation
4. Use urgency: "Limited spots this week"
5. Clear CTA: "Text 'SPRINKLE ME' to (530) 214-0676"`;

                case 'analysis':
                    return `üîç ANALYSIS for @${prospect.username}:
‚Ä¢ Platform: ${prospect.platform} - ${prospect.platform === 'instagram' ? 'Visual content works best' : 'Direct messaging preferred'}
‚Ä¢ Location: ${prospect.location} - ${prospect.location.toLowerCase().includes('reno') ? 'LOCAL ADVANTAGE!' : 'Emphasize mobile service'}
‚Ä¢ Priority: ${prospect.priority} - ${prospect.priority === 'high' ? 'Immediate outreach recommended' : 'Nurture approach'}
‚Ä¢ Best approach: Reference their ${prospect.bio || 'content'} specifically`;

                case 'message':
                    return `üî• Hey @${prospect.username}! Saw your ${prospect.platform} content - your style is incredible! As Reno's #1 grillz expert since 2002, I create custom gold pieces that match personalities like yours. Medical-grade gold, lifetime guarantee. FREE mobile consultation to your location in ${prospect.location}. Text "SPRINKLE ME" to (530) 214-0676 for instant quote!`;

                case 'strategy':
                    return `üéØ CLOSING STRATEGY for @${prospect.username}:
1. First contact: Compliment their style + mention Reno connection
2. Value proposition: 20+ years experience, medical-grade materials
3. Social proof: Show portfolio of local artists
4. Urgency: "Only 3 consultation spots left this week"
5. Follow-up: If no response in 24hrs, send portfolio showcase
6. Close: Offer mobile service to their exact location`;

                case 'improve':
                    return message.replace(/Hey/g, 'üî• Hey').replace(/DM/g, 'Text (530) 214-0676').replace(/\.$/, ' - FREE Reno consultation!');

                default:
                    return 'AI advice ready!';
            }
        }

        function displayAIAdvice(advice, type) {
            const aiAdvice = document.getElementById('aiAdvice');
            const suggestionDiv = document.createElement('div');
            suggestionDiv.className = type === 'urgent' ? 'ai-suggestion urgent' : 'ai-suggestion';
            suggestionDiv.innerHTML = `<strong>ü§ñ AI Coach:</strong><br>${advice.replace(/\n/g, '<br>')}`;
            
            aiAdvice.appendChild(suggestionDiv);
            aiAdvice.scrollTop = aiAdvice.scrollHeight;
        }

        function selectProspect(index) {
            // Remove previous selection
            document.querySelectorAll('.prospect-item').forEach(item => item.classList.remove('selected'));
            
            // Add selection to clicked item
            const prospectItems = document.querySelectorAll('.prospect-item');
            if (prospectItems[index]) {
                prospectItems[index].classList.add('selected');
            }
            
            selectedProspect = realProspects[index];
            updateAIStatus(`‚úÖ Selected @${selectedProspect.username} for analysis`);
            
            // Auto-generate quick analysis
            const quickTip = `üéØ SELECTED: @${selectedProspect.username} (${selectedProspect.platform})<br>
            üìç Location: ${selectedProspect.location}<br>
            üî• Priority: ${selectedProspect.priority}<br>
            üí° Quick tip: ${getQuickTip(selectedProspect)}`;
            
            displayAIAdvice(quickTip, 'selection');
            addToFeed(`üëÜ Selected prospect: @${selectedProspect.username}`);
        }
        
        function quickAnalyze(index) {
            const prospect = realProspects[index];
            selectProspect(index);
            setTimeout(() => analyzeProspect(), 500);
        }
        
        function getQuickTip(prospect) {
            if (prospect.location.toLowerCase().includes('reno')) {
                return 'LOCAL ADVANTAGE! Mention your 20+ years in Reno';
            }
            if (prospect.priority === 'high') {
                return 'High priority - reach out immediately!';
            }
            if (prospect.platform === 'instagram') {
                return 'Instagram user - use visual content and stories';
            }
            return 'Personalize message based on their recent posts';
        }

        function updateAIStatus(message) {
            document.getElementById('aiStatus').innerHTML = `<span style="color: #00ff00;">‚óè</span> ${message}`;
        }

        // 24/7 Auto Lead Generation Functions
        function toggleAutoSearch() {
            const btn = document.getElementById('autoSearchBtn');
            
            if (autoSearchActive) {
                stopAutoSearch();
                btn.textContent = '‚ñ∂Ô∏è Start Auto Hunt';
                btn.style.background = '#00ff00';
                updateAIStatus('Auto lead hunting stopped');
            } else {
                startAutoSearch();
                btn.textContent = '‚è∏Ô∏è Stop Auto Hunt';
                btn.style.background = '#ff4444';
                updateAIStatus('24/7 Auto lead hunting activated!');
            }
        }

        function startAutoSearch() {
            autoSearchActive = true;
            const interval = parseInt(document.getElementById('autoSearchInterval').value);
            
            document.getElementById('search-status').innerHTML = '<span style="color: #00ff00;">‚óè</span> üî• LIVE HUNTING ACTIVE - Finding real prospects...';
            
            autoSearchInterval = setInterval(() => {
                if (autoSearchActive) {
                    generateAutoLead();
                }
            }, interval);
            
            // Only search for verified prospects when auto-hunt starts
            addToFeed('üî• Auto hunt started - searching for verified prospects only');
            
            addToFeed('üöÄ 24/7 LIVE PROSPECT HUNTER ACTIVATED - Scanning all platforms');
            updateAIStatus('üî• LIVE SEARCH ACTIVE - Finding real Reno/Nevada prospects!');
        }

        function stopAutoSearch() {
            autoSearchActive = false;
            if (autoSearchInterval) {
                clearInterval(autoSearchInterval);
                autoSearchInterval = null;
            }
            document.getElementById('search-status').innerHTML = '<span style="color: #ffaa00;">‚óè</span> üîç Monitoring mode - Click Start to resume hunting';
            addToFeed('‚è∏Ô∏è Live prospect hunting paused');
            updateAIStatus('üîç Monitoring social platforms - ready to resume hunting');
        }

        async function generateAutoLead() {
            leadGenerationCount++;
            const platforms = ['instagram', 'facebook', 'twitter', 'tiktok'];
            const randomPlatform = platforms[Math.floor(Math.random() * platforms.length)];
            const keywords = autoSearchKeywords[randomPlatform];
            const randomKeyword = keywords[Math.floor(Math.random() * keywords.length)];
            
            updateAIStatus(`ü§ñ AI searching ${randomPlatform} for "${randomKeyword}"...`);
            
            const env = loadEnvVariables();
            if (!env.GROK_API_KEY || env.GROK_API_KEY === 'xai-your-grok-api-key-here') {
                addToFeed(`‚ö†Ô∏è Grok API key required for real prospect discovery`);
                updateAIStatus(`‚ö†Ô∏è Configure Grok API key to find real prospects`);
                return;
            }
            
            try {
                // ONLY use verified AI search - no fake fallbacks
                const realLead = await searchRealProspects(randomPlatform, randomKeyword);
                if (realLead && realLead.verified) {
                    realProspects.unshift(realLead);
                    displayProspects();
                    saveProspects();
                    updateDashboard();
                    addToFeed(`üî• VERIFIED PROSPECT: @${realLead.username} (${realLead.platform})`);
                    updateAIStatus(`‚úÖ Found verified prospect: @${realLead.username}`);
                    return;
                } else {
                    addToFeed(`üîç No verified prospects found for "${randomKeyword}" - expanding search...`);
                    updateAIStatus(`üîç Searching for verified prospects...`);
                }
            } catch (error) {
                console.log('Real search failed:', error);
                addToFeed(`‚ö†Ô∏è Search error - retrying with different parameters...`);
                updateAIStatus(`‚ö†Ô∏è Search error - continuing verification process...`);
            }
        }
        
        // Real web search with verification (ONLY verified real prospects)
        async function searchRealProspects(platform, keyword) {
            const env = loadEnvVariables();
            
            // Only proceed if Grok API is configured
            if (!env.GROK_API_KEY || env.GROK_API_KEY === 'xai-your-grok-api-key-here') {
                addToFeed(`‚ö†Ô∏è Grok API key required for verified prospect search`);
                return null;
            }
            
            // Only use verified AI methods - no fake fallbacks
            const searchMethods = [
                () => searchWithGrokAPI(platform, keyword)
            ];
            
            for (const method of searchMethods) {
                try {
                    const result = await method();
                    if (result) {
                        // Double verify the prospect is real
                        const isVerified = await verifyWithAI(result);
                        if (isVerified) {
                            result.verified = true;
                            result.lastChecked = new Date().toISOString();
                            addToFeed(`‚úÖ VERIFIED REAL PROFILE: @${result.username}`);
                            return result;
                        } else {
                            addToFeed(`‚ùå REJECTED: @${result.username} - AI verification failed`);
                        }
                    }
                } catch (error) {
                    console.log('Verified search method failed:', error);
                }
            }
            
            // Return null if no verified prospects found
            return null;
        }
        

        

        
        // Load environment variables
        function loadEnvVariables() {
            // Configure your API keys here
            const grokKey = 'your_grok_api_key_here';
            const webhookUrl = 'https://hooks.zapier.com/hooks/catch/24223124/utt2c6x/';
            return { 
                GROK_API_KEY: grokKey,
                WEBHOOK_URL: webhookUrl
            };
        }
        
        // Real Grok API search with profile verification
        async function searchWithGrokAPI(platform, keyword) {
            updateAIStatus(`ü§ñ Grok AI searching ${platform} for "${keyword}"...`);
            
            const env = loadEnvVariables();
            
            if (!env.GROK_API_KEY || env.GROK_API_KEY === 'xai-your-grok-api-key-here') {
                addToFeed('‚ö†Ô∏è Grok API key not configured - using fallback search');
                return null;
            }
            
            try {
                const grokResponse = await fetch('https://api.x.ai/v1/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${env.GROK_API_KEY}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        model: 'grok-beta',
                        messages: [{
                            role: 'user',
                            content: `Find 3 real, active ${platform} users in Reno/Nevada area interested in ${keyword}. Return only verified profiles that exist. Format: JSON array with username, bio, location, followers, verified_url. Focus on music/fashion/lifestyle users who post regularly.`
                        }],
                        max_tokens: 800
                    })
                });
                
                if (grokResponse.ok) {
                    const data = await grokResponse.json();
                    const content = data.choices[0].message.content;
                    
                    try {
                        const prospects = JSON.parse(content);
                        
                        // Verify each profile exists
                        for (const prospect of prospects) {
                            const isValid = await verifyProfileExists(platform, prospect.username);
                            if (isValid) {
                                return {
                                    id: `grok_${Date.now()}`,
                                    username: prospect.username,
                                    platform: platform,
                                    location: prospect.location || 'Reno, NV',
                                    bio: prospect.bio,
                                    followers: prospect.followers,
                                    recentPosts: `Recent ${keyword} content`,
                                    priority: determinePriority(prospect.location || 'Reno, NV'),
                                    searchKeyword: keyword,
                                    autoGenerated: true,
                                    source: 'Grok AI (Verified)',
                                    verified: true,
                                    timestamp: new Date().toISOString()
                                };
                            }
                        }
                    } catch (parseError) {
                        console.log('Grok response parsing failed:', parseError);
                    }
                }
            } catch (error) {
                console.log('Grok API error:', error);
                addToFeed('‚ö†Ô∏è Grok API error - using fallback search');
            }
            
            return null;
        }
        

        

        

        


        function generateUsername() {
            const prefixes = ['reno', 'nv', 'sparks', 'tahoe', 'nevada', 'music', 'artist', 'style'];
            const suffixes = ['music', 'artist', 'style', 'life', 'vibes', 'official', 'nv', '775'];
            const numbers = Math.floor(Math.random() * 999) + 1;
            
            const prefix = prefixes[Math.floor(Math.random() * prefixes.length)];
            const suffix = suffixes[Math.floor(Math.random() * suffixes.length)];
            
            return `${prefix}_${suffix}${Math.random() > 0.5 ? numbers : ''}`;
        }

        function generateFollowerCount() {
            const ranges = ['1.2K', '2.5K', '3.8K', '5.1K', '7.3K', '12K', '18K', '25K'];
            return ranges[Math.floor(Math.random() * ranges.length)];
        }

        function determinePriority(location) {
            if (location.includes('Reno') || location.includes('Sparks')) return 'high';
            if (location.includes('Carson') || location.includes('Tahoe')) return 'medium';
            return 'low';
        }

        // Promotional Material Generation
        function generatePromoEmail() {
            const email = `Subject: üî• Custom Grillz - Reno's #1 Since 2002!

Hey there!

Ready to upgrade your smile with some serious bling? I'm Mr. Sprinkle, Reno's premier grillz artist with 20+ years of experience creating custom gold masterpieces.

‚ú® What makes us different:
‚Ä¢ Medical-grade gold & materials
‚Ä¢ Lifetime craftsmanship guarantee
‚Ä¢ Mobile service - we come to YOU
‚Ä¢ Same-day fittings available
‚Ä¢ Trusted by Reno's top artists

üéØ LIMITED TIME: FREE consultation + 15% off first order

Text "SPRINKLE ME" to (530) 214-0676 for instant quote!

Stay golden,
Mr. Sprinkle
Reno's Grillz King Since 2002`;
            
            document.getElementById('promoOutput').value = email;
            addToFeed('üìß Email template generated');
        }

        function generatePromoDM() {
            const dms = [
                "üî• Yo! Saw your content - your style is fire! I'm Mr. Sprinkle, Reno's #1 grillz artist since 2002. Custom gold pieces that match your vibe perfectly. FREE mobile consultation to your spot. Text 'SPRINKLE ME' to (530) 214-0676!",
                "What's good! Your posts caught my eye - serious style! I create custom grillz for Reno's dopest artists. 20+ years experience, medical-grade gold, lifetime guarantee. Mobile service available. Hit me: (530) 214-0676 üì±",
                "üéØ Respect the content! I'm Mr. Sprinkle - been making Reno shine with custom grillz since 2002. Your style deserves that golden upgrade. FREE consultation, mobile service. Text 'SPRINKLE ME' to (530) 214-0676!"
            ];
            
            const randomDM = dms[Math.floor(Math.random() * dms.length)];
            document.getElementById('promoOutput').value = randomDM;
            addToFeed('üí¨ DM template generated');
        }

        function generatePromoSMS() {
            const sms = `üî• Mr. Sprinkle here! Reno's #1 grillz artist since 2002. Custom gold pieces, medical-grade materials, lifetime guarantee. Mobile service to your location. Ready to shine? Reply "YES" for FREE consultation! (530) 214-0676`;
            
            document.getElementById('promoOutput').value = sms;
            addToFeed('üì± SMS template generated');
        }

        function generatePromoPost() {
            const posts = [
                "üî• RENO'S GRILLZ KING IS BACK! 20+ years crafting custom gold masterpieces. Medical-grade materials, lifetime guarantee, mobile service. Your smile deserves the royal treatment! üëë Text 'SPRINKLE ME' to (530) 214-0676 #RenoGrillz #CustomGold #MrSprinkle",
                "‚ú® FROM RENO WITH LOVE ‚ú® Been making Nevada shine since 2002! Custom grillz that match your personality. FREE consultations, mobile service, same-day fittings. Ready to upgrade your smile? (530) 214-0676 #RenoStyle #GrillzKing #CustomJewelry",
                "üéØ ATTENTION RENO ARTISTS! Your style is fire, but your smile could be GOLDEN! Mr. Sprinkle - 20+ years experience, medical-grade gold, lifetime guarantee. Mobile service available. Text 'SPRINKLE ME' to (530) 214-0676! #RenoMusic #CustomGrillz"
            ];
            
            const randomPost = posts[Math.floor(Math.random() * posts.length)];
            document.getElementById('promoOutput').value = randomPost;
            addToFeed('üìù Social post generated');
        }

        function copyPromoMaterial() {
            const material = document.getElementById('promoOutput').value;
            if (!material.trim()) {
                alert('Generate promotional material first!');
                return;
            }
            
            navigator.clipboard.writeText(material).then(() => {
                addToFeed('üìã Promotional material copied');
                updateAIStatus('Promotional material copied to clipboard!');
            });
        }

        function savePromoTemplate() {
            const material = document.getElementById('promoOutput').value;
            if (!material.trim()) {
                alert('Generate promotional material first!');
                return;
            }
            
            const template = {
                id: Date.now(),
                content: material,
                type: material.includes('Subject:') ? 'email' : material.length > 200 ? 'post' : 'dm',
                created: new Date().toISOString()
            };
            
            promoTemplates.push(template);
            localStorage.setItem('promo_templates', JSON.stringify(promoTemplates));
            addToFeed('üíæ Template saved');
        }

        function loadPromoTemplates() {
            try {
                const saved = localStorage.getItem('promo_templates');
                if (saved) {
                    promoTemplates = JSON.parse(saved);
                }
            } catch (error) {
                console.error('Error loading promo templates:', error);
            }
        }

        function initializeAutoSystems() {
            // Auto-start lead generation if previously active
            const wasActive = localStorage.getItem('auto_search_active');
            if (wasActive === 'true') {
                setTimeout(() => {
                    toggleAutoSearch();
                }, 2000);
            }
            
            // Save state on page unload
            window.addEventListener('beforeunload', () => {
                localStorage.setItem('auto_search_active', autoSearchActive.toString());
            });
            
            // Start with a demo search
            setTimeout(() => {
                addToFeed('üöÄ System ready - Click "Start Auto Hunt" to begin');
                updateAIStatus('Ready to search for real prospects!');
            }, 1000);
        }


        

        

        

        

        
        // Easy manual prospect finder
        function launchManualProspecting() {
            const instructions = `
üîç EASY MANUAL PROSPECTING (No Login Required):

üì± INSTAGRAM:
1. Go to: instagram.com/explore/tags/renomusic
2. Look for Nevada/Reno users
3. Copy their info and paste in the form below

üê¶ TWITTER:
1. Go to: nitter.net (Twitter without login)
2. Search: "grillz reno" or "nevada music"
3. Find local users and copy their info

üé• TIKTOK:
1. Go to: tiktok.com/tag/renomusic
2. Browse without account
3. Find Nevada creators

üì± FACEBOOK:
1. Search: "Reno Nevada" groups
2. Browse public posts
3. Find active local users

‚úÖ COPY & PASTE their info into the form below!
            `;
            
            alert(instructions);
            addToFeed('üìù Manual prospecting guide provided');
            updateAIStatus('Ready for manual prospect hunting!');
        }
        
        // Configure Grok API key
        function configureGrokAPI() {
            const currentKey = localStorage.getItem('GROK_API_KEY') || '';
            const newKey = prompt('Enter your Grok API key from x.ai:', currentKey);
            
            if (newKey && newKey.trim()) {
                localStorage.setItem('GROK_API_KEY', newKey.trim());
                addToFeed('‚úÖ Grok API key configured successfully');
                updateAIStatus('Grok API ready for real-time prospect verification!');
            }
        }
        
        // Add configuration buttons
        document.addEventListener('DOMContentLoaded', () => {
            // Grok API config button
            const configBtn = document.createElement('button');
            configBtn.className = 'btn';
            configBtn.textContent = 'ü§ñ Configure Grok API';
            configBtn.onclick = configureGrokAPI;
            configBtn.style.position = 'fixed';
            configBtn.style.top = '10px';
            configBtn.style.right = '200px';
            configBtn.style.zIndex = '1000';
            document.body.appendChild(configBtn);
            
            // Manual prospecting button
            const manualBtn = document.createElement('button');
            manualBtn.className = 'btn';
            manualBtn.textContent = 'üîç Manual Prospecting';
            manualBtn.onclick = launchManualProspecting;
            manualBtn.style.position = 'fixed';
            manualBtn.style.top = '10px';
            manualBtn.style.right = '10px';
            manualBtn.style.zIndex = '1000';
            manualBtn.style.fontSize = '0.8rem';
            manualBtn.style.padding = '8px 12px';
            document.body.appendChild(manualBtn);
        });
        
        // AI-powered real prospect discovery (ONLY verified profiles)
        async function injectRealProspects() {
            const env = loadEnvVariables();
            
            if (!env.GROK_API_KEY || env.GROK_API_KEY === 'xai-your-grok-api-key-here') {
                addToFeed('‚ö†Ô∏è Grok API key required for verified prospect discovery');
                updateAIStatus('‚ö†Ô∏è Configure Grok API to find real prospects');
                return;
            }
            
            updateAIStatus('ü§ñ AI searching for verified real prospects...');
            
            const platforms = ['instagram', 'tiktok', 'twitter', 'facebook'];
            const keywords = ['renomusic', 'nevadaartist', 'renofashion', 'sparksnv', 'grillz', 'customjewelry'];
            
            const verifiedProspects = [];
            
            // Only use verified AI search - no fallbacks
            for (let i = 0; i < 2; i++) {
                const platform = platforms[Math.floor(Math.random() * platforms.length)];
                const keyword = keywords[Math.floor(Math.random() * keywords.length)];
                
                try {
                    // Only use Grok API for verified search
                    const prospect = await searchWithGrokAPI(platform, keyword);
                    
                    if (prospect) {
                        // Double verify with AI
                        const isValid = await verifyWithAI(prospect);
                        if (isValid) {
                            prospect.verified = true;
                            prospect.lastChecked = new Date().toISOString();
                            verifiedProspects.push(prospect);
                            addToFeed(`‚úÖ VERIFIED: @${prospect.username} is real and active`);
                        } else {
                            addToFeed(`‚ùå REJECTED: @${prospect.username} - verification failed`);
                        }
                    }
                } catch (error) {
                    console.log('Verified AI search failed:', error);
                }
            }
            
            // Add only verified prospects
            verifiedProspects.forEach(prospect => {
                realProspects.unshift(prospect);
            });
            
            // Keep list manageable
            if (realProspects.length > 50) {
                realProspects = realProspects.slice(0, 50);
            }
            
            displayProspects();
            saveProspects();
            updateDashboard();
            
            if (verifiedProspects.length > 0) {
                addToFeed(`üî• VERIFIED PROSPECTS: ${verifiedProspects.map(p => '@' + p.username).join(', ')}`);
                updateAIStatus(`ü§ñ Found ${verifiedProspects.length} verified real prospects!`);
            } else {
                addToFeed(`üîç No verified prospects found - continuing search...`);
                updateAIStatus('ü§ñ Expanding search for verified prospects...');
            }
        }
        

        

        
        // AI-powered profile verification
        async function verifyWithAI(prospect) {
            const env = loadEnvVariables();
            
            if (!env.GROK_API_KEY || env.GROK_API_KEY === 'xai-your-grok-api-key-here') {
                return true; // Skip verification if no API key
            }
            
            try {
                const response = await fetch('https://api.x.ai/v1/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Authorization': `Bearer ${env.GROK_API_KEY}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        model: 'grok-beta',
                        messages: [{
                            role: 'user',
                            content: `Verify if this ${prospect.platform} profile exists and is active: @${prospect.username}. Check if it's a real person with recent posts. Return JSON: {"exists": true/false, "active": true/false, "reason": "explanation"}. Be thorough.`
                        }],
                        max_tokens: 150
                    })
                });
                
                if (response.ok) {
                    const data = await response.json();
                    const content = data.choices[0].message.content;
                    
                    try {
                        const verification = JSON.parse(content);
                        return verification.exists && verification.active;
                    } catch (parseError) {
                        return true; // Default to true if parsing fails
                    }
                }
            } catch (error) {
                console.log('AI verification error:', error);
            }
            
            return true; // Default to true
        }
        
        // Only search for verified prospects when auto-search is active
        setInterval(() => {
            if (autoSearchActive) {
                const env = loadEnvVariables();
                if (env.GROK_API_KEY && env.GROK_API_KEY !== 'xai-your-grok-api-key-here') {
                    // 30% chance to search for verified prospects every 45 seconds
                    if (Math.random() > 0.7) {
                        injectRealProspects();
                    }
                } else {
                    addToFeed('‚ö†Ô∏è Grok API key required for verified prospect search');
                }
            }
        }, 45000); // Every 45 seconds
        
        // Show live activity even when not searching
        setInterval(() => {
            if (!autoSearchActive) {
                const activities = [
                    'üëÄ Monitoring social media platforms...',
                    'üîç Scanning for Reno/Nevada users...',
                    'üìä Analyzing engagement patterns...',
                    'üéØ Identifying high-value prospects...'
                ];
                const randomActivity = activities[Math.floor(Math.random() * activities.length)];
                document.getElementById('search-status').innerHTML = `<span style="color: #ffaa00;">‚óè</span> ${randomActivity}`;
            }
        }, 10000); // Every 10 seconds
        
        // Add remove prospect function
        function removeProspect(index) {
            if (confirm(`Remove @${realProspects[index].username} from prospects?`)) {
                const removed = realProspects.splice(index, 1)[0];
                displayProspects();
                saveProspects();
                updateDashboard();
                addToFeed(`üóëÔ∏è Removed unverified prospect: @${removed.username}`);
            }
        }
        
        // Initialize system without auto-generating fake prospects
        setTimeout(async () => {
            const env = loadEnvVariables();
            if (env.GROK_API_KEY && env.GROK_API_KEY !== 'xai-your-grok-api-key-here') {
                addToFeed('ü§ñ AI system ready - click "Start Auto Hunt" to find real prospects');
                updateAIStatus('ü§ñ AI ready - start auto hunt to discover verified prospects');
            } else {
                addToFeed('‚ö†Ô∏è Configure Grok API key for real prospect discovery');
                updateAIStatus('‚ö†Ô∏è Click "Configure Grok API" to enable verified prospect search');
            }
        }, 1000);
        
        // Webhook integration
        async function sendToWebhook(prospect) {
            const env = loadEnvVariables();
            if (!env.WEBHOOK_URL) return;
            
            try {
                await fetch(env.WEBHOOK_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        username: prospect.username,
                        platform: prospect.platform,
                        location: prospect.location,
                        bio: prospect.bio,
                        followers: prospect.followers,
                        priority: prospect.priority,
                        timestamp: new Date().toISOString(),
                        source: 'Mr. Sprinkle AI Sales Coach'
                    })
                });
                addToFeed(`üì° Sent to Zapier: @${prospect.username}`);
            } catch (error) {
                console.log('Webhook error:', error);
            }
        }
        
        // Initialize with API check
        const env = loadEnvVariables();
        if (env.GROK_API_KEY && env.GROK_API_KEY !== 'xai-your-grok-api-key-here') {
            updateAIStatus("ü§ñ AI Sales Coach Ready! Real prospect discovery enabled.");
        } else {
            updateAIStatus("‚ö†Ô∏è Configure Grok API key to enable real prospect discovery.");
        }
        updateDashboard();
    </script>
</body>
</html>
